
# ××—×œ×§×ª ×›×¡×¤×™× - ×¤×¨×•×™×§×˜ ×‘×¡×™×¡×™ × ×ª×•× ×™×

**×©××•×ª ×”××’×™×©×•×ª:**  
- ×•×§× ×™×Ÿ ×”×“×¡ ××¡×ª×¨ â€“ 324966993  
- ×™×©×¨××œ×™ ×ª×”×™×œ×” â€“ 325119493  

**×©× ×”××¢×¨×›×ª:**  
× ×™×”×•×œ ×›×¡×¤×™× ×‘×™×§×‘  
**×”×™×—×™×“×” ×”× ×‘×—×¨×ª:**  
××—×œ×§×ª ×›×¡×¤×™×

---

## ×ª×•×›×Ÿ ×¢× ×™×™× ×™×

1. [××‘×•×](#××‘×•×)
2. [×ª×¨×©×™× ERD](#×ª×¨×©×™×-erd)
3. [×ª×¨×©×™× DSD](#×ª×¨×©×™×-dsd)
4. [×”×—×œ×˜×•×ª ×¢×™×¦×•×‘](#×”×—×œ×˜×•×ª-×¢×™×¦×•×‘)
5. [×©×™×˜×•×ª ×”×›× ×¡×ª × ×ª×•× ×™×](#×©×™×˜×•×ª-×”×›× ×¡×ª-× ×ª×•× ×™×)
6. [×’×™×‘×•×™ ×•×©×—×–×•×¨ × ×ª×•× ×™×](#×’×™×‘×•×™-×•×©×—×–×•×¨-× ×ª×•× ×™×)

---

## ××‘×•×

### ×ª×™××•×¨ ×”× ×ª×•× ×™× ×”× ×©××¨×™× ×‘××¢×¨×›×ª:

1. **×˜×‘×œ×ª ×ª×©×œ×•××™× (payment)** â€“ ××–×”×”, ×¡×›×•×, ×ª××¨×™×š, ×¡×•×’ (×”×›× ×¡×”/×”×•×¦××”)
2. **×˜×‘×œ×ª ×¢×•×‘×“×™× (employee)** â€“ ××–×”×”, ×©×, ×ª××¨×™×š ×”×ª×—×œ×”, ×©×›×¨
3. **×˜×‘×œ×ª ×ª×§×¦×™×‘×™× (budgets)** â€“ ×©× ×”, ×¡×›×•×
4. **×˜×‘×œ×ª ×”×©×§×¢×•×ª (investments)** â€“ ××–×”×” ×”×©×§×¢×”, ××©×§×™×¢, ×¡×›×•×, ×ª×©×•××”
5. **×˜×‘×œ×ª ×¨×›×™×©×•×ª (purchases)** â€“ ××™×“×¢ ×¢×œ ××” × ×¨×›×©, ×›××”, ×•××™ ×¨×›×©
6. **×˜×‘×œ×ª ××™×¡×™× (taxes)** â€“ ×¡×›×•×, ××—×•×–, ×›×œ×œ×™× ××©×ª× ×™×
7. **×˜×‘×œ×ª ××©×›×•×¨×•×ª (salary)** â€“ ×‘×¨×•×˜×•, × ×˜×•, ×”×¤×¨×©×™× ××•×œ ××¡

### ×”×¤×•× ×§×¦×™×•× ×œ×™×•×ª ×”×¢×™×§×¨×™×ª ×‘××¢×¨×›×ª:

- ×§×™×©×•×¨ ×ª×©×œ×•× ×œ×”×©×§×¢×•×ª / ×¨×›×™×©×•×ª / ××©×›×•×¨×•×ª
- ×—×™×©×•×‘ ×©×›×¨ × ×˜×• ×œ××—×¨ × ×™×›×•×™ ××¡
- × ×™×”×•×œ ×ª×§×¦×™×‘ ××•×œ ×”×›× ×¡×•×ª ×•×”×•×¦××•×ª ×‘×¤×•×¢×œ
- ××¢×§×‘ ××—×¨ ×¨×›×™×©×•×ª ×œ×¤×™ ×¦×¨×›×Ÿ, ×›××•×ª ×•××—×™×¨
- ×—×™×©×•×‘ ××¡×™× ×œ×¤×™ ×—×•×§×™× ××•×ª×××™×

---

## ×ª×¨×©×™× ERD

![ERD](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/%D7%A9%D7%9C%D7%91%20%D7%90/ERD.png?raw=true)

---

## ×ª×¨×©×™× DSD

![DSD](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/%D7%A9%D7%9C%D7%91%20%D7%90/DSD.png?raw=true)

---

## ×”×—×œ×˜×•×ª ×¢×™×¦×•×‘

1. ×¨×™×›×•×– ×›×œ ×¡×•×’×™ ×”×ª×©×œ×•××™× ×‘×˜×‘×œ×” ××—×ª (`payment`) ×œ× ×™×”×•×œ ××—×™×“ ×•×§×œ.
2. ×§×™×©×•×¨ ×™×©×™×¨ ×‘×™×Ÿ `payment` ×œ×‘×™×Ÿ ×”×©×§×¢×•×ª, ×¨×›×™×©×•×ª ×•××©×›×•×¨×•×ª â€“ ×œ×©× ××¢×§×‘ ×‘×¨×•×¨ ××—×¨×™ ××§×•×¨ ×”×”×•×¦××”/×”×›× ×¡×”.
3. ×¤×™×¦×•×œ ×¨×›×™×©×•×ª ×œ×¨×›×™×©×•×ª ×›×œ×œ×™×•×ª ×•×¨×›×™×‘×™ ×¨×›×™×©×” â€“ ×œ×¤×™×¨×•×˜ ××œ× ×©×œ ××” × ×§× ×”.
4. ×”×¤×¨×“×ª ××©×›×•×¨×•×ª â€“ ×××¤×©×¨×ª ×œ×—×©×‘ ×©×›×¨ × ×˜×• ×œ×¤×™ ×—×•×§×™ ××¡ ××©×ª× ×™×.
5. ×©×™××•×© ×‘×˜×‘×œ×ª ×ª×§×¦×™×‘×™× â€“ ×œ××¢×§×‘ ×©× ×ª×™ ×•×œ×”×©×•×•××” ××•×œ ×”×•×¦××•×ª.
6. ×©××™×¨×ª ××—×•×–×™ ××¡ ×‘×˜×‘×œ×” × ×¤×¨×“×ª â€“ ×›×š × ×™×ª×Ÿ ×œ×¢×“×›×Ÿ ×—×•×§×™× ×‘×œ×™ ×œ×©× ×•×ª ××ª ××‘× ×” ×”×˜×‘×œ××•×ª.

---

## ×©×™×˜×•×ª ×”×›× ×¡×ª × ×ª×•× ×™×

### 1. ×©×™××•×© ×‘Ö¾Mockaroo

[mockarooFiles](https://github.com/estisellam/department-finance---winery/tree/main/DBProject/%D7%A9%D7%9C%D7%91%20%D7%90/mockarooFiles)

### 2. ×©×™××•×© ×‘Ö¾GENERATEDATA

[generatedataFiles](https://github.com/estisellam/department-finance---winery/tree/main/DBProject/%D7%A9%D7%9C%D7%91%20%D7%90/generatedataFiles)

### 3. ×¡×§×¨×™×¤×˜ ×‘Ö¾Python

[scripts folder](https://github.com/estisellam/department-finance---winery/tree/main/DBProject/%D7%A9%D7%9C%D7%91%20%D7%90/python_script)

---

## ×’×™×‘×•×™ ×•×©×—×–×•×¨ × ×ª×•× ×™×

![Backup](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/%D7%A9%D7%9C%D7%91%20%D7%90/%D7%A6%D7%99%D7%9C%D7%95%D7%9D%20%D7%9E%D7%A1%D7%9A%202025-05-02%20%D7%91-9.34.22.png?raw=true)

**×§×•×‘×¥ ×”×’×™×‘×•×™:** `gibuy.sql`  
**×§×•×‘×¥ ×”×©×—×–×•×¨:** `insertTables.sql`  
×‘×•×¦×¢ ×©×™××•×© ×‘Ö¾pgAdmin ×œ×™×™×¦×•× ×•×©×—×–×•×¨ ×”× ×ª×•× ×™×.

---

# ×“×•×— ×¤×¨×•×™×§×˜ â€“ ×©×œ×‘ ×‘

## ğŸ”¹ ×©××™×œ×ª×•×ª SELECT

### 1. ×¢×•×‘×“×™× ×©××—×¨××™× ×¢×œ ×”×©×§×¢×•×ª
```sql
SELECT DISTINCT e.e_id, e.e_name
FROM employee e
NATURAL JOIN payment p
NATURAL JOIN in_Investments i
ORDER BY e.e_name ASC;
```
![×”×¨×¦×”](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/×©×œ×‘%20×‘/×©××™×œ×ª×”7.47.40-2%202025-05-09%20update%201.png?raw=true)  
![×ª×•×¦××”](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/×©×œ×‘%20×‘/×©××™×œ×ª×”7.59.05-2%202025-05-09%20update%202.png?raw=true)

---

## ğŸ”¹ ×©××™×œ×ª×•×ª UPDATE

### ×¢×“×›×•×Ÿ ××—×•×– ×¨×•×•×— ×œ××©×§×™×¢×™× ×¢× ×ª×©×œ×•× ××¢×œ 10,000
```sql
BEGIN;
UPDATE Investments
SET profit_Percentage = 15
WHERE id_Investor IN (
  SELECT ii.id_Investor
  FROM in_Investments ii
  NATURAL JOIN payment p
  WHERE p.p_sum > 10000
);
ROLLBACK;
```
![×œ×¤× ×™](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/×©×œ×‘%20×‘/×©××™×œ×ª×”7.49.47-3%202025-05-09%20update%201.png?raw=true)  
![×”×¨×¦×”](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/×©×œ×‘%20×‘/×©××™×œ×ª×”7.50.02-3%202025-05-09%20update%201.png?raw=true)  
![××—×¨×™](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/×©×œ×‘%20×‘/×©××™×œ×ª×”8.00.08-2%202025-05-09%20update%202.png?raw=true)

---

## ğŸ”¹ ×©×™××•×© ×‘Ö¾ROLLBACK
```sql
BEGIN;
UPDATE employee
SET salary = salary * 1.10
WHERE e_id = 1;
ROLLBACK;
```
![rollback](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/×©×œ×‘%20×‘/×©××™×œ×ª×”8.02.65-3%202025-05-09%20update%203.png?raw=true)

---

## ğŸ”¹ ×©×™××•×© ×‘Ö¾COMMIT
```sql
BEGIN;
UPDATE employee
SET salary = salary * 1.10
WHERE e_id = 1;
COMMIT;
```
![commit](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/×©×œ×‘%20×‘/×©××™×œ×ª×”8.03.07-3%202025-05-09%20update%203.png?raw=true)

---

## ğŸ”¹ ××™×œ×•×¦×™×

### ××™×œ×•×¥ 1: NOT NULL ×¢×œ employee.e_name
```sql
ALTER TABLE employee
ALTER COLUMN e_name SET NOT NULL;

INSERT INTO employee (e_id, e_name, job_start_date, salary)
VALUES (777, NULL, '2022-01-01', 8000);
```
![××™×œ×•×¥ 1](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/×©×œ×‘%20×‘/1%20××™×œ×•×¥8.15.58-3%202025-05-09%20×ª××•× ×”.png?raw=true)

---

### ××™×œ×•×¥ 2: CHECK ×¢×œ neto_salary <= salary
```sql
ALTER TABLE salary
ADD CONSTRAINT check_net_salary
CHECK (neto_salary <= salary);

INSERT INTO salary (e_id, neto_salary)
VALUES (1, 999999);
```
![××™×œ×•×¥ 2](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/×©×œ×‘%20×‘/2%20××™×œ×•×¥8.18.06-3%202025-05-09%20×ª××•× ×”.png?raw=true)

---

### ××™×œ×•×¥ 3: DEFAULT ×¢×œ taxes.percent
```sql
ALTER TABLE taxes
ALTER COLUMN percent SET DEFAULT 17;

INSERT INTO taxes (t_id, taxname, principal_amount)
VALUES (999, '××¡ × ×™×¡×™×•×Ÿ', 10000);
```
![××™×œ×•×¥ 3](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/×©×œ×‘%20×‘/3%20××™×œ×•×¥8.19.22-3%202025-05-09%20×ª××•× ×”.png?raw=true)


*×”×¤×¨×•×™×§×˜ × ×‘× ×” ×‘×©×™××•×© PostgreSQL ×•×›×œ×™ pgAdmin 4.*
