
# ΧΧ—ΧΧ§Χ Χ›Χ΅Χ¤Χ™Χ - Χ¤Χ¨Χ•Χ™Χ§Χ Χ‘Χ΅Χ™Χ΅Χ™ Χ ΧΧ•Χ Χ™Χ

**Χ©ΧΧ•Χ Χ”ΧΧ’Χ™Χ©Χ•Χ:**  
- Χ•Χ§Χ Χ™Χ Χ”Χ“Χ΅ ΧΧ΅ΧΧ¨ β€“ 324966993  
- Χ™Χ©Χ¨ΧΧΧ™ ΧΧ”Χ™ΧΧ” β€“ 325119493  

**Χ©Χ Χ”ΧΧΆΧ¨Χ›Χ:**  
Χ Χ™Χ”Χ•Χ Χ›Χ΅Χ¤Χ™Χ Χ‘Χ™Χ§Χ‘  
**Χ”Χ™Χ—Χ™Χ“Χ” Χ”Χ Χ‘Χ—Χ¨Χ:**  
ΧΧ—ΧΧ§Χ Χ›Χ΅Χ¤Χ™Χ

---

## ΧΧ•Χ›Χ ΧΆΧ Χ™Χ™Χ Χ™Χ

1. [ΧΧ‘Χ•Χ](#ΧΧ‘Χ•Χ)
2. [ΧΧ¨Χ©Χ™Χ ERD](#ΧΧ¨Χ©Χ™Χ-erd)
3. [ΧΧ¨Χ©Χ™Χ DSD](#ΧΧ¨Χ©Χ™Χ-dsd)
4. [Χ”Χ—ΧΧΧ•Χ ΧΆΧ™Χ¦Χ•Χ‘](#Χ”Χ—ΧΧΧ•Χ-ΧΆΧ™Χ¦Χ•Χ‘)
5. [Χ©Χ™ΧΧ•Χ Χ”Χ›Χ Χ΅Χ Χ ΧΧ•Χ Χ™Χ](#Χ©Χ™ΧΧ•Χ-Χ”Χ›Χ Χ΅Χ-Χ ΧΧ•Χ Χ™Χ)
6. [Χ’Χ™Χ‘Χ•Χ™ Χ•Χ©Χ—Χ–Χ•Χ¨ Χ ΧΧ•Χ Χ™Χ](#Χ’Χ™Χ‘Χ•Χ™-Χ•Χ©Χ—Χ–Χ•Χ¨-Χ ΧΧ•Χ Χ™Χ)

---

## ΧΧ‘Χ•Χ

### ΧΧ™ΧΧ•Χ¨ Χ”Χ ΧΧ•Χ Χ™Χ Χ”Χ Χ©ΧΧ¨Χ™Χ Χ‘ΧΧΆΧ¨Χ›Χ:

1. **ΧΧ‘ΧΧ ΧΧ©ΧΧ•ΧΧ™Χ (payment)** β€“ ΧΧ–Χ”Χ”, Χ΅Χ›Χ•Χ, ΧΧΧ¨Χ™Χ, Χ΅Χ•Χ’ (Χ”Χ›Χ Χ΅Χ”/Χ”Χ•Χ¦ΧΧ”)
2. **ΧΧ‘ΧΧ ΧΆΧ•Χ‘Χ“Χ™Χ (employee)** β€“ ΧΧ–Χ”Χ”, Χ©Χ, ΧΧΧ¨Χ™Χ Χ”ΧΧ—ΧΧ”, Χ©Χ›Χ¨
3. **ΧΧ‘ΧΧ ΧΧ§Χ¦Χ™Χ‘Χ™Χ (budgets)** β€“ Χ©Χ Χ”, Χ΅Χ›Χ•Χ
4. **ΧΧ‘ΧΧ Χ”Χ©Χ§ΧΆΧ•Χ (investments)** β€“ ΧΧ–Χ”Χ” Χ”Χ©Χ§ΧΆΧ”, ΧΧ©Χ§Χ™ΧΆ, Χ΅Χ›Χ•Χ, ΧΧ©Χ•ΧΧ”
5. **ΧΧ‘ΧΧ Χ¨Χ›Χ™Χ©Χ•Χ (purchases)** β€“ ΧΧ™Χ“ΧΆ ΧΆΧ ΧΧ” Χ Χ¨Χ›Χ©, Χ›ΧΧ”, Χ•ΧΧ™ Χ¨Χ›Χ©
6. **ΧΧ‘ΧΧ ΧΧ™Χ΅Χ™Χ (taxes)** β€“ Χ΅Χ›Χ•Χ, ΧΧ—Χ•Χ–, Χ›ΧΧΧ™Χ ΧΧ©ΧΧ Χ™Χ
7. **ΧΧ‘ΧΧ ΧΧ©Χ›Χ•Χ¨Χ•Χ (salary)** β€“ Χ‘Χ¨Χ•ΧΧ•, Χ ΧΧ•, Χ”Χ¤Χ¨Χ©Χ™Χ ΧΧ•Χ ΧΧ΅

### Χ”Χ¤Χ•Χ Χ§Χ¦Χ™Χ•Χ ΧΧ™Χ•Χ Χ”ΧΆΧ™Χ§Χ¨Χ™Χ Χ‘ΧΧΆΧ¨Χ›Χ:

- Χ§Χ™Χ©Χ•Χ¨ ΧΧ©ΧΧ•Χ ΧΧ”Χ©Χ§ΧΆΧ•Χ / Χ¨Χ›Χ™Χ©Χ•Χ / ΧΧ©Χ›Χ•Χ¨Χ•Χ
- Χ—Χ™Χ©Χ•Χ‘ Χ©Χ›Χ¨ Χ ΧΧ• ΧΧΧ—Χ¨ Χ Χ™Χ›Χ•Χ™ ΧΧ΅
- Χ Χ™Χ”Χ•Χ ΧΧ§Χ¦Χ™Χ‘ ΧΧ•Χ Χ”Χ›Χ Χ΅Χ•Χ Χ•Χ”Χ•Χ¦ΧΧ•Χ Χ‘Χ¤Χ•ΧΆΧ
- ΧΧΆΧ§Χ‘ ΧΧ—Χ¨ Χ¨Χ›Χ™Χ©Χ•Χ ΧΧ¤Χ™ Χ¦Χ¨Χ›Χ, Χ›ΧΧ•Χ Χ•ΧΧ—Χ™Χ¨
- Χ—Χ™Χ©Χ•Χ‘ ΧΧ΅Χ™Χ ΧΧ¤Χ™ Χ—Χ•Χ§Χ™Χ ΧΧ•ΧΧΧΧ™Χ

---

## ΧΧ¨Χ©Χ™Χ ERD

![ERD](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/%D7%A9%D7%9C%D7%91%20%D7%90/ERD.png?raw=true)

---

## ΧΧ¨Χ©Χ™Χ DSD

![DSD](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/%D7%A9%D7%9C%D7%91%20%D7%90/DSD.png?raw=true)

---

## Χ”Χ—ΧΧΧ•Χ ΧΆΧ™Χ¦Χ•Χ‘

1. Χ¨Χ™Χ›Χ•Χ– Χ›Χ Χ΅Χ•Χ’Χ™ Χ”ΧΧ©ΧΧ•ΧΧ™Χ Χ‘ΧΧ‘ΧΧ” ΧΧ—Χ (`payment`) ΧΧ Χ™Χ”Χ•Χ ΧΧ—Χ™Χ“ Χ•Χ§Χ.
2. Χ§Χ™Χ©Χ•Χ¨ Χ™Χ©Χ™Χ¨ Χ‘Χ™Χ `payment` ΧΧ‘Χ™Χ Χ”Χ©Χ§ΧΆΧ•Χ, Χ¨Χ›Χ™Χ©Χ•Χ Χ•ΧΧ©Χ›Χ•Χ¨Χ•Χ β€“ ΧΧ©Χ ΧΧΆΧ§Χ‘ Χ‘Χ¨Χ•Χ¨ ΧΧ—Χ¨Χ™ ΧΧ§Χ•Χ¨ Χ”Χ”Χ•Χ¦ΧΧ”/Χ”Χ›Χ Χ΅Χ”.
3. Χ¤Χ™Χ¦Χ•Χ Χ¨Χ›Χ™Χ©Χ•Χ ΧΧ¨Χ›Χ™Χ©Χ•Χ Χ›ΧΧΧ™Χ•Χ Χ•Χ¨Χ›Χ™Χ‘Χ™ Χ¨Χ›Χ™Χ©Χ” β€“ ΧΧ¤Χ™Χ¨Χ•Χ ΧΧΧ Χ©Χ ΧΧ” Χ Χ§Χ Χ”.
4. Χ”Χ¤Χ¨Χ“Χ ΧΧ©Χ›Χ•Χ¨Χ•Χ β€“ ΧΧΧ¤Χ©Χ¨Χ ΧΧ—Χ©Χ‘ Χ©Χ›Χ¨ Χ ΧΧ• ΧΧ¤Χ™ Χ—Χ•Χ§Χ™ ΧΧ΅ ΧΧ©ΧΧ Χ™Χ.
5. Χ©Χ™ΧΧ•Χ© Χ‘ΧΧ‘ΧΧ ΧΧ§Χ¦Χ™Χ‘Χ™Χ β€“ ΧΧΧΆΧ§Χ‘ Χ©Χ ΧΧ™ Χ•ΧΧ”Χ©Χ•Χ•ΧΧ” ΧΧ•Χ Χ”Χ•Χ¦ΧΧ•Χ.
6. Χ©ΧΧ™Χ¨Χ ΧΧ—Χ•Χ–Χ™ ΧΧ΅ Χ‘ΧΧ‘ΧΧ” Χ Χ¤Χ¨Χ“Χ β€“ Χ›Χ Χ Χ™ΧΧ ΧΧΆΧ“Χ›Χ Χ—Χ•Χ§Χ™Χ Χ‘ΧΧ™ ΧΧ©Χ Χ•Χ ΧΧ ΧΧ‘Χ Χ” Χ”ΧΧ‘ΧΧΧ•Χ.

---

## Χ©Χ™ΧΧ•Χ Χ”Χ›Χ Χ΅Χ Χ ΧΧ•Χ Χ™Χ

### 1. Χ©Χ™ΧΧ•Χ© Χ‘ΦΎMockaroo

[mockarooFiles](https://github.com/estisellam/department-finance---winery/tree/main/DBProject/%D7%A9%D7%9C%D7%91%20%D7%90/mockarooFiles)

### 2. Χ©Χ™ΧΧ•Χ© Χ‘ΦΎGENERATEDATA

[generatedataFiles](https://github.com/estisellam/department-finance---winery/tree/main/DBProject/%D7%A9%D7%9C%D7%91%20%D7%90/generatedataFiles)

### 3. Χ΅Χ§Χ¨Χ™Χ¤Χ Χ‘ΦΎPython

[scripts folder](https://github.com/estisellam/department-finance---winery/tree/main/DBProject/%D7%A9%D7%9C%D7%91%20%D7%90/python_script)

---

## Χ’Χ™Χ‘Χ•Χ™ Χ•Χ©Χ—Χ–Χ•Χ¨ Χ ΧΧ•Χ Χ™Χ

![Backup](https://github.com/estisellam/department-finance---winery/blob/main/DBProject/%D7%A9%D7%9C%D7%91%20%D7%90/%D7%A6%D7%99%D7%9C%D7%95%D7%9D%20%D7%9E%D7%A1%D7%9A%202025-05-02%20%D7%91-9.34.22.png?raw=true)

**Χ§Χ•Χ‘Χ¥ Χ”Χ’Χ™Χ‘Χ•Χ™:** `gibuy.sql`  
**Χ§Χ•Χ‘Χ¥ Χ”Χ©Χ—Χ–Χ•Χ¨:** `insertTables.sql`  
Χ‘Χ•Χ¦ΧΆ Χ©Χ™ΧΧ•Χ© Χ‘ΦΎpgAdmin ΧΧ™Χ™Χ¦Χ•Χ Χ•Χ©Χ—Χ–Χ•Χ¨ Χ”Χ ΧΧ•Χ Χ™Χ.

---

# Χ“Χ•Χ— Χ¤Χ¨Χ•Χ™Χ§Χ β€“ Χ©ΧΧ‘ Χ‘
ΦΏ
---

## π”Ή Χ“Χ•Χ’ΧΧΧ•Χ ΧΧΧ•Χ Χ¦Χ™ΧΧ•ΧΧ™ ΧΧ΅Χ

### 1. SELECT β€“ ΧΆΧ•Χ‘Χ“Χ™Χ Χ©ΧΧ—Χ¨ΧΧ™Χ ΧΆΧ Χ”Χ©Χ§ΧΆΧ•Χ
```sql
SELECT DISTINCT e.e_id, e.e_name
FROM employee e
NATURAL JOIN payment p
NATURAL JOIN in_Investments i
ORDER BY e.e_name ASC;
```
**Χ”Χ¨Χ¦Χ”:**  
![Χ”Χ¨Χ¦Χ”](./Χ©ΧΧ‘%20Χ‘/Χ©ΧΧ™ΧΧΧ”%207.47.40-2%202025-05-09%20update%201.png)

**ΧΧ•Χ¦ΧΧ”:**  
![ΧΧ•Χ¦ΧΧ”](./Χ©ΧΧ‘%20Χ‘/Χ©ΧΧ™ΧΧΧ”%207.59.05-3%202025-05-09%20update%202.png)

---

### 2. UPDATE β€“ ΧΧ—Χ•Χ– Χ¨Χ•Χ•Χ— ΧΧΧ©Χ§Χ™ΧΆΧ™Χ ΧΆΧ ΧΧ©ΧΧ•Χ Χ’Χ‘Χ•Χ”
```sql
BEGIN;
UPDATE Investments
SET profit_Percentage = 15
WHERE id_Investor IN (
  SELECT ii.id_Investor
  FROM in_Investments ii
  NATURAL JOIN payment p
  WHERE p.p_sum > 10000
);
ROLLBACK;
```

**ΧΧ¤Χ Χ™:**  
![ΧΧ¤Χ Χ™](./Χ©ΧΧ‘%20Χ‘/Χ©ΧΧ™ΧΧΧ”%207.49.47-3%202025-05-09%20update%201.png)

**Χ”Χ¨Χ¦Χ”:**  
![Χ”Χ¨Χ¦Χ”](./Χ©ΧΧ‘%20Χ‘/Χ©ΧΧ™ΧΧΧ”%207.50.02-3%202025-05-09%20update%201.png)

**ΧΧ—Χ¨Χ™:**  
![ΧΧ—Χ¨Χ™](./Χ©ΧΧ‘%20Χ‘/Χ©ΧΧ™ΧΧΧ”%208.00.03-2%202025-05-09%20update%202.png)

---

### 3. ΧΧ™ΧΧ•Χ¥ β€“ NOT NULL ΧΆΧ employee.e_name
```sql
ALTER TABLE employee
ALTER COLUMN e_name SET NOT NULL;

INSERT INTO employee (e_id, e_name, job_start_date, salary)
VALUES (777, NULL, '2022-01-01', 8000);
```

**Χ Χ™Χ΅Χ™Χ•Χ Χ”Χ¤Χ¨Χ”:**  
![ΧΧ™ΧΧ•Χ¥ 1](./Χ©ΧΧ‘%20Χ‘/ΧΧ™ΧΧ•Χ¥%201%208.15.58.png)

---

### 4. ΧΧ™ΧΧ•Χ¥ β€“ CHECK ΧΆΧ neto_salary <= salary
```sql
ALTER TABLE salary
ADD CONSTRAINT check_net_salary
CHECK (neto_salary <= salary);

INSERT INTO salary (e_id, neto_salary)
VALUES (1, 999999);
```

**Χ Χ™Χ΅Χ™Χ•Χ Χ”Χ¤Χ¨Χ”:**  
![ΧΧ™ΧΧ•Χ¥ 2](./Χ©ΧΧ‘%20Χ‘/ΧΧ™ΧΧ•Χ¥%202%208.18.14.png)

---

### 5. ΧΧ™ΧΧ•Χ¥ β€“ DEFAULT ΧΆΧ taxes.percent
```sql
ALTER TABLE taxes
ALTER COLUMN percent SET DEFAULT 17;

INSERT INTO taxes (t_id, taxname, principal_amount)
VALUES (999, 'ΧΧ΅ Χ Χ™Χ΅Χ™Χ•Χ', 10000);
```

**ΧΧ•Χ¦ΧΧ”:**  
![ΧΧ™ΧΧ•Χ¥ 3](./Χ©ΧΧ‘%20Χ‘/ΧΧ™ΧΧ•Χ¥%203%208.19.22.png)

---

### 6. Rollback Example
```sql
BEGIN;
UPDATE employee SET salary = salary * 1.10 WHERE e_id = 1;
ROLLBACK;
```

**Χ¦Χ™ΧΧ•Χ ΧΧ•Χ¦ΧΧ” ΧΧΧ—Χ¨ Rollback:**  
![rollback](./Χ©ΧΧ‘%20Χ‘/Χ©ΧΧ™ΧΧΧ”%208.02.65-3%202025-05-09%20update%203.png)

---

### 7. Commit Example
```sql
BEGIN;
UPDATE employee SET salary = salary * 1.10 WHERE e_id = 1;
COMMIT;
```

**Χ¦Χ™ΧΧ•Χ ΧΧ•Χ¦ΧΧ” ΧΧΧ—Χ¨ Commit:**  
![commit](./Χ©ΧΧ‘%20Χ‘/Χ©ΧΧ™ΧΧΧ”%208.03.07-3%202025-05-09%20update%203.png)

---

π“¦ Χ›Χ Χ”ΧΧΧ•Χ Χ•Χ Χ¦Χ•Χ¨Χ¤Χ• Χ‘ΧΧ™Χ§Χ™Χ™Χ `Χ©ΧΧ‘ Χ‘` ΧΧ¤Χ™ Χ©ΧΧ•Χ Χ§Χ‘Χ¦Χ™Χ Χ‘Χ¨Χ•Χ¨Χ™Χ ΧΧ›Χ Χ©ΧΧ™ΧΧΧ”.


*Χ”Χ¤Χ¨Χ•Χ™Χ§Χ Χ Χ‘Χ Χ” Χ‘Χ©Χ™ΧΧ•Χ© PostgreSQL Χ•Χ›ΧΧ™ pgAdmin 4.*
